<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ðŸ’œ Burger Shot Calculator</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap"
    rel="stylesheet"
  />
  <style>
    :root {
      --bg: #121212;
      --card-bg: #1f1f1f;
      --header-bg: #2a2a2a;
      --panel-bg: #292929;
      --accent: #e63946;
      --text: #f1f1f1;
      --muted: #888;
      --border: #333;
      --font: 'Poppins', sans-serif;
      --radius: 8px;
      --transition: 0.3s ease;
    }
    * { box-sizing: border-box }
    body {
      margin: 0;
      background: var(--bg);
      font-family: var(--font);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 1rem;
    }
    .calculator {
      display: flex;
      flex-wrap: wrap;
      width: 100%;
      max-width: 900px;
      background: var(--card-bg);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: 0 6px 20px rgba(0,0,0,0.7);
    }
    .menu {
      flex: 2 1 500px;
      padding: 1rem;
      display: flex;
      flex-direction: column;
    }
    .header {
      text-align: center;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
      background: var(--header-bg);
      padding: 1rem;
      border-radius: var(--radius) var(--radius) 0 0;
      border-bottom: 1px solid var(--border);
    }
    .items-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill,minmax(140px,1fr));
      gap: 1rem;
      margin-top: 1rem;
      flex: 1;
    }
    .item-card {
      background: var(--panel-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0.75rem;
      transition: transform var(--transition);
    }
    .item-card:hover { transform: translateY(-4px) }
    .item-card h3 {
      font-size: 1rem;
      font-weight: 500;
      text-align: center;
      margin-bottom: 0.5rem;
    }
    .qty-control {
      display: flex;
      align-items: center;
      background: var(--header-bg);
      border: 1px solid var(--accent);
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 0.5rem;
    }
    .qty-control button {
      width: 32px;
      height: 32px;
      border: none;
      background: var(--accent);
      color: var(--text);
      cursor: pointer;
      font-size: 1.2rem;
      transition: background var(--transition);
    }
    .qty-control button:hover,
    .qty-control button:focus {
      background: #ff5f6d;
      outline: none;
    }
    .qty-control input[type="number"] {
      width: 50px;
      border: none;
      background: transparent;
      color: var(--text);
      text-align: center;
      font-size: 1rem;
    }
    .price {
      font-size: 0.9rem;
      color: var(--muted);
    }
    .sidebar {
      flex: 1 1 250px;
      background: var(--header-bg);
      padding: 1rem;
      border-left: 1px solid var(--border);
      display: flex;
      flex-direction: column;
    }
    .discount-panel,
    .totals-panel {
      background: var(--panel-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .discount-panel h2,
    .totals-panel h2 {
      margin: 0 0 0.75rem;
      font-size: 1.2rem;
      color: var(--accent);
      text-align: center;
    }
    .discount-panel input[type='range'] {
      -webkit-appearance: none;
      width: 100%;
      height: 6px;
      background: var(--border);
      border-radius: 4px;
      background-image: linear-gradient(var(--accent),var(--accent));
      background-size: var(--pct) 100%;
      background-repeat: no-repeat;
      transition: background-size var(--transition);
    }
    .discount-value {
      text-align: right;
      font-size: 0.9rem;
    }
    .clear-btn {
      background: var(--accent);
      color: var(--text);
      border: none;
      border-radius: var(--radius);
      padding: 0.5rem;
      font-size: 1rem;
      cursor: pointer;
      width: 100%;
      margin-bottom: 1rem;
      transition: background var(--transition);
    }
    .clear-btn:hover {
      background: #ff5f6d;
    }
    .totals div {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    .total {
      font-weight: 700;
      color: var(--accent);
      font-size: 1.2rem;
    }
    .footer {
      margin-top: auto;
      font-size: 0.75rem;
      color: var(--muted);
    }
  </style>
</head>
<body>
  <main class="calculator" aria-label="Burger Shot order calculator">
    <section class="menu">
      <header class="header">ðŸ’œ Burger Shot Calculator</header>
      <div class="items-grid" id="items-grid" role="list"></div>
    </section>
    <aside class="sidebar" aria-labelledby="order-summary">
      <div class="discount-panel">
        <h2 id="discount-label">Discount</h2>
        <input
          type="range"
          id="discount-range"
          aria-labelledby="discount-label"
          min="0" max="100" step="1" value="0"
        />
        <div class="discount-value" id="discount-val">0%</div>
      </div>
      <button id="clear-btn" class="clear-btn">Clear All</button>
      <div class="totals-panel" id="order-summary">
        <h2>Order Summary</h2>
        <div class="totals">
          <div><span>Subtotal</span><span id="subtotal">$0.00</span></div>
          <div><span>Discount</span><span id="discount-amt">-$0.00</span></div>
          <div class="total"><span>Total</span><span id="final">$0.00</span></div>
        </div>
      </div>
      <footer class="footer">Made by Vixa</footer>
    </aside>
  </main>

  <script>
    (() => {
      'use strict';

      const DRINK_UNIT_COST    = 20;
      const SMOOTHIE_UNIT_COST = 25;
      const DRINK_COST         = DRINK_UNIT_COST * 4;
      const SMOOTHIE_COST      = SMOOTHIE_UNIT_COST * 4;

      const meals = [
        ['Hamburger Meal',150],
        ['Cheeseburger Meal',200],
        ['Bacon & Cheese Meal',250],
        ['Bacon, Egg & Cheese Meal',300],
        ['Veggie Meal',150],
        ['Nugget Meal',150],
        ['Combo Meal',250],
        ['Happy Meal',1500]
      ];

      const items = meals
        .slice(0,6)
        .map(([name, price]) => {
          const unitName = name.replace(/ Meal$/,'').trim();
          const packCost = name.startsWith('Veggie') ? SMOOTHIE_COST : DRINK_COST;
          const unitPrice = (price - packCost) / 4;
          return [unitName, unitPrice];
        })
        .concat([
          ['Drink', DRINK_UNIT_COST],
          ['Avocado Smoothie', SMOOTHIE_UNIT_COST]
        ]);

      const menu = meals.concat(items);

      const grid      = document.getElementById('items-grid');
      const discRange = document.getElementById('discount-range');
      const discVal   = document.getElementById('discount-val');
      const clearBtn  = document.getElementById('clear-btn');
      const subEl     = document.getElementById('subtotal');
      const discAmtEl = document.getElementById('discount-amt');
      const finalEl   = document.getElementById('final');
      const fmt       = new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'});

      // Restore or init
      const saved = JSON.parse(localStorage.getItem('burgerShot')) || {};
      const quantities = Array.isArray(saved.quantities) && saved.quantities.length === menu.length
        ? saved.quantities
        : Array(menu.length).fill(0);
      let discount = saved.discount || 0;

      // Render menu cards
      const frag = document.createDocumentFragment();
      menu.forEach(([name, price], idx) => {
        const card = document.createElement('div');
        card.className = 'item-card';
        card.setAttribute('role','listitem');
        card.innerHTML = `
          <h3>${name}</h3>
          <div class="qty-control">
            <button type="button" class="minus" aria-label="Remove one ${name}">â€“</button>
            <input type="number" min="0" step="1" value="${quantities[idx]}" aria-label="${name} quantity" />
            <button type="button" class="plus" aria-label="Add one ${name}">+</button>
          </div>
          <div class="price">${fmt.format(price)}</div>
        `;
        frag.appendChild(card);
      });
      grid.appendChild(frag);

      // Initialize discount UI
      discRange.value = discount;
      discVal.textContent = discount + '%';
      updateSliderBG();
      recalc();

      // Quantity buttons via delegation
      grid.addEventListener('click', e => {
        const btn = e.target.closest('button');
        if (!btn) return;
        const plus = btn.classList.contains('plus');
        const card = btn.closest('.item-card');
        const idx  = Array.from(grid.children).indexOf(card);
        const inp  = card.querySelector('input');
        let v = parseInt(inp.value,10) || 0;
        v = plus ? v + 1 : Math.max(0, v - 1);
        inp.value = v;
        quantities[idx] = v;
        saveState();
        recalc();
      });

      // Discount slider
      discRange.addEventListener('input', () => {
        discount = +discRange.value;
        discVal.textContent = discount + '%';
        updateSliderBG();
        saveState();
        recalc();
      });

      // Clear all selections
      clearBtn.addEventListener('click', () => {
        // reset quantities
        quantities.fill(0);
        grid.querySelectorAll('input[type="number"]').forEach(inp => inp.value = 0);
        // reset discount
        discount = 0;
        discRange.value = 0;
        discVal.textContent = '0%';
        updateSliderBG();
        saveState();
        recalc();
      });

      function recalc() {
        const sub = menu.reduce((sum, [, price], i) =>
          sum + price * (quantities[i] || 0), 0
        );
        const damt = sub * discount / 100;
        subEl.textContent     = fmt.format(sub);
        discAmtEl.textContent = `- ${fmt.format(damt)}`;
        finalEl.textContent   = fmt.format(sub - damt);
      }
      function updateSliderBG() {
        discRange.style.setProperty('--pct', discount + '%');
      }
      function saveState() {
        localStorage.setItem('burgerShot',
          JSON.stringify({ quantities, discount })
        );
      }
    })();
  </script>
</body>
</html>
